# A/B 테스트가 뭔가요.

모든 사람들이 통계학적인 지식을 갖고 있는 것은 아니다. 내가 아는 단어를, 상대방도 안다고 생각하는 것은 좋지 않다. 내가 귀무가설이든, 제 1종 오류든, 유의 수준이든, 통계학적인 용어를 말해봤자, 상대방이 이러한 용어에 대해 알고 있지 않다면, 내가 하는 말이 외계어처럼 들릴 것이다.

A/B 테스트 또한 마찬가지이다. 회사 내에서 누군가는 A/B 테스트에 대해 잘 이해하고 있는 사람이 있을 수도 있고, 누군가는 잘 모르는 사람들도 있을 것이다. 이 글은 A/B 테스트를 잘 모르는 사람들을 위해, 작성되었다. 실제로, 프로덕트 매니저님 한 분은, A/B 테스트를 통해 무엇을 검증하고 무엇을 비교하는 지 잘 모르셨는데, 매우 당연한 일이라고 생각한다. 

## 그래서 뭔가요
A/B 테스트는 정말로 차이가 존재하는지, 존재하지 않는지를 검증하는 테스트이다. 즉, 존재의 유무만 판단한다. 존재의 크기는 판단하지 않는다. 
예를 들어보자. 우리 반이 옆반보다 영어 점수가 5점 낮다고 해보자. 이 때, 우리 담임 선생님은 생각하실 것이다. "정말 우리 애들이 멍청해서 영어 점수가 5점 낮은 걸까?"라고 말이다.

그래서 담임 선생님은 두 가지의 가설을 세운다.
1번 가설 : 우리 아이들과 옆반 애들은 지능적으로 차이가 없다. 따라서, 평균 영어 점수가 사실은 같을 것이다.
2번 가설 : 우리 아이들과 옆반 애들은 지능적으로 차이가 있다. 따라서, 평균 영어 점수도 다를 수 밖에 없다.

담임 선생님은, 우리 아이들을 너무 사랑하셔서, 1번 가설을 믿고 싶어 하신다. 하지만, 1번 가설이 진짜라면, 5점의 차이는 대체 왜 발생한 것일까? 가설과 다르게, 차이가 있어서 발생한 것일까? 아니면, 그냥 우연히 발생한 것일까?

여기에서, 5점의 차이가, 실제로 지능의 차이로 인해 발생한 것인지, 아니면 우연히 발생한 것인지를 통계학적으로 증명하는 것이 A/B 테스트라고 할 수 있다.

## 통계학적인 접근 방식
그래서 이것을 통계학적으로 어떻게 증명 가능한지를 한 번 살펴보자. 여기에서 중심극한정리라던가, Z분포 등 다양한 통계학적 개념들이 등장하는데, 우리 수준 높으신 독자분들은 알고 있을거라 생각하여, 설명은 생략하겠습니다.. 죄송합니다.

우리 반 아이들의 영어 점수와 옆반 아이들의 영어 점수를 봐보자. 각각 20명 정도의 학생이라고 가정을 해보겠다.

### 우리 반 영어 점수 (평균: 72점)
| 학생 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
|------|---|---|---|---|---|---|---|---|---|---|
| 점수 | 65 | 78 | 70 | 82 | 68 | 75 | 60 | 73 | 69 | 80 |

| 학생 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 |
|------|---|---|---|---|---|---|---|---|---|---|
| 점수 | 71 | 66 | 74 | 85 | 62 | 77 | 72 | 68 | 76 | 69 |

### 옆반 영어 점수 (평균: 77점)
| 학생 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
|------|---|---|---|---|---|---|---|---|---|---|
| 점수 | 72 | 85 | 74 | 88 | 70 | 79 | 68 | 80 | 75 | 82 |

| 학생 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 |
|------|---|---|---|---|---|---|---|---|---|---|
| 점수 | 76 | 71 | 81 | 90 | 65 | 83 | 78 | 73 | 79 | 71 |


우리 반 평균은 **72점**, 옆반 평균은 **77점**으로 약 5점의 차이가 난다. 이 5점 차이가 "실제로 의미 있는 차이"인지, 아니면 "그냥 우연히 발생한 차이"인지를 검증하는 것이 A/B 테스트의 핵심이다.

### 핵심 질문: "5점 차이가 우연일 확률은?"

통계학적으로 이 질문에 답하기 위해, 우리는 다음과 같은 과정을 거친다.

**Step 1: 1번 가설(차이가 없다)이 참이라고 가정하자**

만약 두 반의 실력이 동일하다면, 우리가 관측한 5점 차이는 순전히 "우연"으로 발생한 것이다. 그렇다면, 이런 우연이 얼마나 자주 일어날 수 있을까?

**Step 2: 우연히 5점 차이가 날 확률을 계산하자**

20명씩 무작위로 시험을 보면, 평균 점수는 매번 조금씩 달라진다. 이 "흔들림"의 정도를 **표준오차(Standard Error)**라고 부른다. 

위 데이터를 기반으로 계산하면:
- 우리 반 표준편차: 약 6.5점
- 옆반 표준편차: 약 6.8점
- 두 평균 차이의 표준오차: 약 2.1점

즉, **"차이가 없을 때도 평균적으로 2.1점 정도는 우연히 벌어질 수 있다"**는 뜻이다.

**Step 3: 5점은 우연치고는 너무 큰가?**

5점 차이를 표준오차로 나누면:
$$t = \frac{5}{2.1} \approx 2.38$$

이 값이 **t-통계량**이다. 이 값이 클수록, "우연으로는 설명하기 어렵다"는 의미다.

**Step 4: p-value로 판단하기**

t = 2.38일 때, **"1번 가설이 참인데 이런 차이가 우연히 날 확률"**은 약 **2.3% (p = 0.023)** 이다.

보통 5% 이하면 "우연이라고 보기 어렵다"고 판단한다. 따라서:

> **결론: 5점 차이는 우연이 아니라, 실제로 두 반 사이에 차이가 있을 가능성이 높다.**

담임 선생님은 슬프시겠지만, 통계적으로 우리 반이 옆반보다 영어 점수가 낮다는 것이 증명되었다. 😢

### 신뢰구간: 차이의 크기는?

p-value는 "차이가 있는가?"만 알려준다. 그렇다면 "차이가 **얼마나** 나는가?"는 어떻게 알 수 있을까? 이때 사용하는 것이 **신뢰구간(Confidence Interval)**이다.

**두 평균 차이의 95% 신뢰구간 공식:**
$$(\bar{X}_1 - \bar{X}_2) \pm t_{\alpha/2, df} \times SE$$

우리 예시에 적용하면:
| 항목 | 값 |
|------|-----|
| 평균 차이 | 77 - 72 = **5점** |
| 표준오차 (SE) | **2.1점** |
| t 임계값 (df=38, 95%) | **2.024** |

$$5 \pm 2.024 \times 2.1 = 5 \pm 4.25$$

→ **95% 신뢰구간: [0.75점, 9.25점]**

**해석:** 두 반의 실제 점수 차이는 **95% 확률로 0.75점 ~ 9.25점 사이**에 있다.

**중요 포인트:**
- 신뢰구간이 **0을 포함하지 않음** → 유의미한 차이 있음 (p < 0.05와 동일한 결론)
- 만약 [−2점, 7점]처럼 0을 포함했다면 → 차이가 없을 수도 있음

| 관점 | p-value | 신뢰구간 |
|------|---------|---------|
| 질문 | "차이가 있긴 한가?" | "차이가 얼마나 되는가?" |
| 우리 예시 | p = 0.023 (유의함) | [0.75, 9.25]점 차이 |
| 제공 정보 | 유무만 판단 | **크기까지** 알려줌 |

> 실무 팁: 요즘은 p-value만 보고하면 안 되고, **신뢰구간도 같이** 보고하는 게 권장된다. "유의하다"보다 "5점 차이 (95% CI: 0.75-9.25)"가 훨씬 정보가 풍부하기 때문이다.

## 그 외의 예시


