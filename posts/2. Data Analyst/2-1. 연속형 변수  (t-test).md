# 연속형 변수 : t-test

대학교를 다닐 때, 수리통계학과 계량경제학 입문에서 배우는 개념 중 하나인 "중심극한정리". 중심극한정리를 통해, 모분포가 어떻든 상관없이, 표본의 크기가 충분히 크다면, 표본 평균은 정규분포를 따른다는 것을 배웠다. t-test는 이러한 중심극한정리를 바탕으로, 두 표본의 평균에 차이가 있는지 검정하는 방법이다.

t-test가 유효하려면 다음과 같은 가정이 필요하다.

1. 독립성 : 관측값이 서로 독립
2. 정규성 : 모집단이 정규분포를 따르거나 CLT로 표본이 정규분포에 근사
3. 등분산성 : 두 그룹의 분산이 동일 

A/B테스트에서 독립성은 보통 만족한다. 그러나, 정규성과 등분산성에서 만족하지 않는 경우들이 있다. 정규성을 만족하지 않는 경우에 사용할 때, 검정하는 방법인 Mann-Whitney U test와 Bootstrap test는 다음 글에서 설명하고, 이번에는 t 검정의 조건을 만족한다는 가정하에서 t-test를 진행하는 방법에 대해서 알아보겠다.

(이 글은 나를 비롯한 통계학을 직관적으로 이해하기 쉽게 설명하는 글이다. 따라서, 엄밀한 수학적 정의나 증명은 생략한다.)

## 검정한다?
- 검정한다는 것은 무엇일까? t-test에서 test는 무엇을 test한다는 것일까? 내가 보고해야 하는 상관이 항상 통계학에 대한 지식이 있을 거라고 보장할 수 없다. 그 때마다, t-test에 대해서 통계학적인 용어를 써가며, 설명하는 것은 비효율적일 수 있다. 따라서, t-test를 직관적으로 이해할 수 있도록 설명하는 것이 필요하다.

- t-test를 통계학적으로 설명하자면 귀무가설과 대립가설을 설정하고, 귀무가설이 맞다는 가정하에, t-test를 진행하여, t-값을 구하고, t-값을 바탕으로 p-value를 구한다. p-value가 유의수준보다 작으면, 귀무가설을 기각하고, 대립가설을 채택한다..라고 설명할 수 있겠지만, 이것을 듣고 단번에 이해할 수 있는 사람이 몇 명이나 되겠는가?

- 예를 들어보자. 우리반이 옆반보다 영어 평균 점수가 10점이 낮다고 한다. 그렇다면 우리 담임 선생님은 이렇게 생각할 것이다. 우리 반 아이들이 정말 옆반보다 멍청해서 10점이 낮은걸까, 아니면 단순히 우연히 이번 시험에서만 10점 낮게 나온걸까? 이거를 다르게 표현하면 이렇게 표현할 수 있겠다. 
A. 우리 아이들과 옆반 아이들의 지식 수준은 동일하다. 
B. 우리 아이들과 옆반 아이들의 지식 수준은 동일하지 않다. 그래서, 우리 반이 옆반보다 10점 낮게 나왔다.

여기에서 A가 귀무가설, B가 대립가설이 되겠다. 영어로는 null hypothesis, alternative hypothesis라고 한다.

좀 더 비지니스적인 관점에서 예시를 들어보겠다. 가장 많이 예시로 드는 것이 시약효과이다.
A. 알약은 효과가 없다.
B. 알약은 효과가 있다. 와 같은 예시도 있을 수 있겠다.

프로덕트 관점에서 보자면, 우리가 어떤 프로덕트를 개선하기 위해 A/B 테스트를 진행한다고 가정해보자. A는 기존 프로덕트, B는 개선된 프로덕트이다. 그렇다면, A/B 테스트를 진행하는 이유는 무엇일까? 바로, 개선된 프로덕트가 기존 프로덕트보다 더 나은지 알아보기 위해서이다. 즉, 개선된 프로덕트가 기존 프로덕트보다 더 나은지 알아보기 위해서이다. 
A. 개선된 프로덕트가 기존 프로덕트와 동일하다.
B. 개선된 프로덕트가 기존 프로덕트보다 더 낫다. 와 같은 예시도 있을 수 있겠다.

이렇게 귀무가설과 대립가설을 설정한 뒤, 귀무가설이 참이라는 가정하에서 현재와 같은 상황이 발생할 확률이 얼마나 되는가?를 알아보는 것이 검정이다. 즉, 우리 반과 옆반의 영어 실력이 동일하다라는 가정하에서 10점이라는 차이가 발생할 확률이 얼마나 되는가?를 알아보는 것이다. 만약, 발생할 확률이 극히 낮다면, 10점이라는 차이가 우연히 발생했다고 해석하기보다는, 정말 옆반과 우리반의 무언가에 의한 차이로 인해 발생했다고 해석하는 것이 타당할 것이며, 발생할 확률이 높다면, 10점이라는 차이가 우연히 발생했다고 해석하는 것이 타당할 것이다. 이것을 수학적, 통계학적으로 증명하는 것이 t-test이다.

## t-test의 수학적 과정



## 실제 예시
